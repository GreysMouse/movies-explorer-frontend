{"version":3,"sources":["config.js","utils/viewportWidthListener.js","utils/moviesFilter.js","utils/moviesCountHandler.js","utils/errorHandler.js","utils/authApi.js","utils/userApi.js","utils/moviesApi.js","contexts/CurrentUserContext.js","contexts/IsLoggedInContext.js","contexts/IsDataLoadingContext.js","images/current-user-avatar.jpg","components/ProtectedRoute/ProtectedRoute.js","images/website-logo.svg","components/Logo/Logo.js","images/default-student-avatar.svg","components/Navigation/Navigation.js","components/MenuButton/MenuButton.js","components/Header/Header.js","components/NavTab/NavTab.js","components/Promo/Promo.js","components/SectionHeader/SectionHeader.js","components/PlanGrid/PlanGrid.js","components/AboutProject/AboutProject.js","components/Techs/Techs.js","components/Portfolio/Portfolio.js","components/StudentCard/StudentCard.js","components/AboutMe/AboutMe.js","components/Main/Main.js","components/Footer/Footer.js","components/FilterCheckbox/FilterCheckbox.js","components/SearchForm/SearchForm.js","components/Preloader/Preloader.js","components/MoviesCard/MoviesCard.js","components/MoviesCardList/MoviesCardList.js","components/MoviesUploader/MoviesUploader.js","components/Movies/Movies.js","components/SavedMovies/SavedMovies.js","components/ProfileForm/ProfileForm.js","components/ProfileFormInput/ProfileFormInput.js","components/Profile/Profile.js","components/AuthForm/AuthForm.js","components/AuthPage/AuthPage.js","components/AuthFormInput/AuthFormInput.js","components/Register/Register.js","components/Login/Login.js","components/Menu/Menu.js","components/NotFoundPage/NotFoundPage.js","components/ErrorInfoPopup/ErrorInfoPopup.js","components/App/App.js","index.js"],"names":["MAIN_API_BASE_URL","MOVIES_API_BASE_URL","USER_NAME_REGEXP","viewportWidthListener","viewportWidthHandler","window","addEventListener","removeEventListener","moviesFilter","options","this","_baseURL","baseURL","moviesList","map","movie","_id","country","director","duration","year","description","image","url","trailer","trailerLink","thumbnail","formats","movieId","id","nameRU","nameEN","owner","str","word","str_pointer","word_pointer","length","searchQuery","isShort","keyWords","toLowerCase","split","filter","key","filteredMoviesList","_isWordFound","push","moviesCountHandler","currentViewportWidth","cardsCount","uploadsCount","foundMoviesList","uploadedMoviesList","_getDisplayedCardsCount","slice","pointer","_getUploadedCardsCount","errorHandler","error","errorMessage","name","status","authApi","res","ok","json","Promise","reject","email","password","fetch","method","headers","body","JSON","stringify","then","_checkResponse","credentials","userApi","moviesApi","_mainBaseURL","mainBaseURL","_moviesBaseURL","moviesBaseURL","CurrentUserContext","React","createContext","IsLoggedInContext","IsDataLoadingContext","ProtectedRoute","props","isLoggedIn","useContext","path","children","to","defaultPath","Logo","className","src","websiteLogo","alt","Navigation","currentUser","location","activeClassName","avatar","defaultStudentAvatar","exact","MenuButton","onClick","onMenuOpen","Header","NavTab","addClasses","Promo","SectionHeader","PlanGrid","AboutProject","Techs","href","target","rel","Portfolio","portfolio","app","i","link","StudentCard","bio","accounts","account","AboutMe","Main","Footer","currentYear","Date","getFullYear","FilterCheckbox","type","isChecked","htmlFor","onCheck","SearchForm","isDataloading","useState","setSearchQuery","isFormValid","setIsFormValid","isShortMovie","setIsShortMovie","placeholder","autoComplete","spellCheck","required","value","onChange","evt","preventDefault","page","onMoviesSearch","console","log","disabled","Preloader","MoviesCard","addButtonClass","isSaved","onDelete","onFilteredMovieDelete","onSave","MoviesCardList","handleFilteredMovieDelete","deletedMovieId","inSearch","displayedMoviesList","displayedMovie","savedMovie","savedMoviesList","find","onMovieSave","onMovieDelete","MoviesUploader","onButtonClick","Movies","isSearchButtonClicked","onUploaderClick","SavedMovies","setFilteredMoviesList","setInSearch","filteredMovies","searchFilter","ProfileForm","isDataLoading","isSpanVisible","spanText","onSubmit","ProfileFormInput","labelText","minLength","maxLength","Profile","userName","setUserName","userEmail","setUserEmail","isValidUserName","setIsValidUserName","isValidUserEmail","setIsValidUserEmail","setSpanText","userNameSpanText","setUserNameSpanText","userEmailSpanText","setUserEmailSpanText","useEffect","onUserUpdate","valid","validity","Validator","matches","isEmail","logoutLink","onLogout","AuthForm","submitButtonText","AuthPage","pageTitle","redirectText","redirectLink","redirectLinkText","AuthFormInput","Register","userPassword","setUserPassword","isValidUserPassword","setIsValidUserPassword","userPasswordSpanText","setUserPasswordSpanText","onRegister","Login","onLogin","Menu","isOpen","NotFoundPage","useHistory","goBack","ErrorInfoPopup","message","App","history","innerWidth","setCurrentViewportWidth","isViewportWidthResizing","setIsViewportWidthResizing","setIsDataLoading","infoMessage","setInfoMessage","currentUserAvatar","setCurrentUser","setIsLoggedIn","isMenuOpen","setIsMenuOpen","isInfoPopupOpen","setIsInfoPopupOpen","isMoviesSearchInitiated","setIsMoviesSearchInitiated","initialMoviesList","setInitialMoviesList","setFoundMoviesList","setDisplayedMoviesList","setSavedMoviesList","handleViewportWidth","setTimeout","handleSavedMoviesUpload","getSavedMovies","movies","catch","err","showInfoMessage","handleAuthorization","parse","localStorage","getItem","handleLogin","user","login","removeItem","finally","handleMovieDelete","deleteMovie","handleMenuButtonClick","tagName","setListener","getUserCredentials","removeListener","getCards","Provider","register","searchMovies","formattedMoviesList","propertiesFilter","setItem","saveMovie","uploadedMovieCards","uploadCards","concat","updateUserCredentials","logout","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.512bf9db.chunk.js","sourcesContent":["const VIEWPORT_WIDTH_RESIZING_TIMEOUT = 1000;\r\nconst INFO_POPUP_TIMEOUT = 8000;\r\n\r\nconst MAIN_API_BASE_URL = 'https://api.beatfilms.greysmouse.nomoredomains.monster';\r\nconst MOVIES_API_BASE_URL = 'https://api.nomoreparties.co';\r\n\r\nconst USER_NAME_REGEXP = /^[A-Za-zА-Яа-я -]*$/;\r\n\r\nconst SHORT_MOVIE_DURATION_LIMIT = 40;\r\n\r\nconst SCREEN_WIDTH_CHECKPOINT_768PX = 768;\r\nconst SCREEN_WIDTH_CHECKPOINT_425PX = 425;\r\n\r\nconst MOVIES_CARD_MIN_COUNT_DEFAULT = 12;\r\nconst MOVIES_CARD_MIN_COUNT_768PX = 8;\r\nconst MOVIES_CARD_MIN_COUNT_425PX = 5;\r\n\r\nconst MOVIES_CARD_UPLOAD_COUNT_DEFAULT = 3;\r\nconst MOVIES_CARD_UPLOAD_COUNT_768PX = 2;\r\nconst MOVIES_CARD_UPLOAD_COUNT_425PX = 2;\r\n\r\nexport {\r\n  VIEWPORT_WIDTH_RESIZING_TIMEOUT,\r\n  INFO_POPUP_TIMEOUT,\r\n  MAIN_API_BASE_URL,\r\n  MOVIES_API_BASE_URL,\r\n  USER_NAME_REGEXP,\r\n  SHORT_MOVIE_DURATION_LIMIT,\r\n  SCREEN_WIDTH_CHECKPOINT_768PX,\r\n  SCREEN_WIDTH_CHECKPOINT_425PX,\r\n  MOVIES_CARD_MIN_COUNT_DEFAULT,\r\n  MOVIES_CARD_MIN_COUNT_768PX,\r\n  MOVIES_CARD_MIN_COUNT_425PX,\r\n  MOVIES_CARD_UPLOAD_COUNT_DEFAULT,\r\n  MOVIES_CARD_UPLOAD_COUNT_768PX,\r\n  MOVIES_CARD_UPLOAD_COUNT_425PX\r\n};\r\n","class ViewportWidthListener {\r\n  setListener(viewportWidthHandler) {\r\n    window.addEventListener('resize', viewportWidthHandler);\r\n  }\r\n\r\n  removeListener(viewportWidthHandler) {\r\n    window.removeEventListener('resize', viewportWidthHandler);\r\n  }\r\n}\r\n\r\nconst viewportWidthListener = new ViewportWidthListener();\r\n\r\nexport default viewportWidthListener;\r\n\r\n\r\n","import { MOVIES_API_BASE_URL, SHORT_MOVIE_DURATION_LIMIT } from '../config';\r\n\r\nclass MoviesFilter {\r\n  constructor(options) {\r\n    this._baseURL = options.baseURL;\r\n  }\r\n\r\n  propertiesFilter(moviesList) {\r\n    return moviesList.map((movie) => {\r\n      return {\r\n        _id: movie._id || '-1',\r\n        country: movie.country || 'no country',\r\n        director: movie.director || 'no director',\r\n        duration: movie.duration || 1000000,\r\n        year: movie.year || 'no year',\r\n        description: movie.description || 'no description',\r\n        image: MOVIES_API_BASE_URL + movie.image.url || '',\r\n        trailer: movie.trailerLink || 'https://example.com/',\r\n        thumbnail: MOVIES_API_BASE_URL + movie.image.formats.thumbnail.url || '',\r\n        movieId: movie.id || 1000000,\r\n        nameRU: movie.nameRU || 'no nameRU',\r\n        nameEN: movie.nameEN || 'no NameEN',\r\n        owner: movie.owner || '-1'\r\n      };\r\n    });  \r\n  };\r\n\r\n  _isWordFound(str, word) {\r\n    let str_pointer = 0;\r\n    let word_pointer = 0;\r\n\r\n    while(str_pointer < str.length) {\r\n      if (str[str_pointer] === word[word_pointer]) {\r\n        if (word_pointer === word.length - 1) return true;\r\n        word_pointer++;\r\n      }\r\n      else if (word_pointer !== 0) {\r\n        word_pointer = 0;\r\n        continue;\r\n      }\r\n      str_pointer++;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  searchFilter(moviesList, searchQuery, isShort) {\r\n    const keyWords = searchQuery.toLowerCase().split(' ').filter((key) => !!key);\r\n    const filteredMoviesList = [];\r\n\r\n    let nameRU = '';\r\n    let nameEN = '';\r\n    \r\n    for (let movie of moviesList) {\r\n      if (isShort && movie.duration > SHORT_MOVIE_DURATION_LIMIT) continue;\r\n      \r\n      nameRU = movie.nameRU.toLowerCase();\r\n      nameEN = movie.nameEN.toLowerCase();\r\n\r\n      for (let word of keyWords) {\r\n        word = word.toLowerCase();\r\n\r\n        if (this._isWordFound(nameRU, word) || this._isWordFound(nameEN, word)) {\r\n            filteredMoviesList.push(movie);\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    \r\n    return filteredMoviesList;\r\n  }\r\n}\r\n\r\nconst moviesFilter = new MoviesFilter({\r\n  MOVIES_API_BASE_URL\r\n});\r\n\r\nexport default moviesFilter;\r\n","import {\r\n  SCREEN_WIDTH_CHECKPOINT_768PX,\r\n  SCREEN_WIDTH_CHECKPOINT_425PX,\r\n  MOVIES_CARD_MIN_COUNT_DEFAULT,\r\n  MOVIES_CARD_MIN_COUNT_768PX,\r\n  MOVIES_CARD_MIN_COUNT_425PX,\r\n  MOVIES_CARD_UPLOAD_COUNT_DEFAULT,\r\n  MOVIES_CARD_UPLOAD_COUNT_768PX,\r\n  MOVIES_CARD_UPLOAD_COUNT_425PX\r\n} from '../config';\r\n\r\nclass MoviesCountHandler {\r\n  _getDisplayedCardsCount(currentViewportWidth) {\r\n    let cardsCount = MOVIES_CARD_MIN_COUNT_DEFAULT;\r\n\r\n    if (currentViewportWidth <= SCREEN_WIDTH_CHECKPOINT_425PX) {\r\n      cardsCount = MOVIES_CARD_MIN_COUNT_425PX;\r\n    }\r\n    else if (currentViewportWidth <= SCREEN_WIDTH_CHECKPOINT_768PX) {\r\n      cardsCount = MOVIES_CARD_MIN_COUNT_768PX;\r\n    }\r\n\r\n    return cardsCount;\r\n  }\r\n\r\n  _getUploadedCardsCount(currentViewportWidth) {\r\n    let uploadsCount = MOVIES_CARD_UPLOAD_COUNT_DEFAULT;\r\n\r\n    if (currentViewportWidth <= SCREEN_WIDTH_CHECKPOINT_425PX) {\r\n      uploadsCount = MOVIES_CARD_UPLOAD_COUNT_425PX;\r\n    }\r\n    else if (currentViewportWidth <= SCREEN_WIDTH_CHECKPOINT_768PX) {\r\n      uploadsCount = MOVIES_CARD_UPLOAD_COUNT_768PX;\r\n    }\r\n\r\n    return uploadsCount;\r\n  }\r\n  \r\n  getCards(foundMoviesList, uploadedMoviesList, currentViewportWidth) {\r\n    const cardsCount = this._getDisplayedCardsCount(currentViewportWidth);\r\n\r\n    // ----- Чтобы не уменьшать уже видимое число фильмов при уменьшении разрешения -----//\r\n    if (uploadedMoviesList.length >= cardsCount ) return uploadedMoviesList;\r\n    // --------------------------------------------------------------------------------- //\r\n\r\n    return foundMoviesList.slice(0, cardsCount);\r\n  }\r\n\r\n  uploadCards(foundMoviesList, uploadedMoviesList, currentViewportWidth) {\r\n    const pointer = uploadedMoviesList.length;\r\n    \r\n    let uploadsCount = this._getUploadedCardsCount(currentViewportWidth);\r\n\r\n    if (pointer + uploadsCount > foundMoviesList.length) {\r\n      uploadsCount = pointer + uploadsCount - foundMoviesList.length + 1;\r\n    }\r\n    return foundMoviesList.slice(pointer, pointer + uploadsCount);\r\n  }\r\n}\r\n\r\nconst moviesCountHandler = new MoviesCountHandler();\r\n\r\nexport default moviesCountHandler;\r\n","function errorHandler(error, errorMessage) {\r\n  if (error.name === 'TypeError') errorMessage = error; //'Соединение с сервером не установлено'\r\n  if (error.status === 500) errorMessage = 'Сервер не отвечает';\r\n\r\n  return `Ошибка: ${ errorMessage }`;\r\n}\r\n\r\nexport default errorHandler;\r\n","import { MAIN_API_BASE_URL } from '../config';\r\n\r\nclass AuthApi {\r\n  constructor(options) {\r\n    this._baseURL = options.baseURL;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) return res.json();\r\n    return Promise.reject(res);\r\n  }\r\n  \r\n  register({ email, password, name }) {\r\n    return fetch(`${ this._baseURL }/signup`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email, password, name })\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n\r\n  login({ email, password }) {\r\n    return fetch(`${ this._baseURL }/signin`, {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n\r\n  logout() {\r\n    return fetch(`${ this._baseURL }/signout`, {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n}\r\n\r\nconst authApi = new AuthApi({\r\n  baseURL: MAIN_API_BASE_URL\r\n});\r\n\r\nexport default authApi;\r\n","import { MAIN_API_BASE_URL } from '../config';\r\n\r\nclass UserApi {\r\n  constructor(options) {\r\n    this._baseURL = options.baseURL;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) return res.json();\r\n    return Promise.reject(res);\r\n  }\r\n  \r\n  getUserCredentials() {\r\n    return fetch(`${ this._baseURL }/users/me`, {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n\r\n  updateUserCredentials({ email, name }) {\r\n    return fetch(`${ this._baseURL }/users/me`, {\r\n      method: 'PATCH',\r\n      credentials: 'include',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email, name })\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n}\r\n\r\nconst userApi = new UserApi({\r\n  baseURL: MAIN_API_BASE_URL\r\n});\r\n\r\nexport default userApi;\r\n","import { MAIN_API_BASE_URL, MOVIES_API_BASE_URL } from '../config';\r\n\r\nclass MoviesApi {\r\n  constructor(options) {\r\n    this._mainBaseURL = options.mainBaseURL;\r\n    this._moviesBaseURL = options.moviesBaseURL;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) return res.json();\r\n    return Promise.reject(res);\r\n  }\r\n  \r\n  searchMovies() {\r\n    return fetch(`${ this._moviesBaseURL }/beatfilm-movies`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n\r\n  getSavedMovies() {\r\n    return fetch(`${ this._mainBaseURL }/movies`, {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n\r\n  saveMovie({ country, director, duration, year, description, image, trailer, thumbnail, movieId, nameRU, nameEN }) {\r\n    return fetch(`${ this._mainBaseURL }/movies`, {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        country, director, duration, year, description, image, trailer, thumbnail, movieId, nameRU, nameEN\r\n      })\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n\r\n  deleteMovie(movieId) {\r\n    return fetch(`${ this._mainBaseURL }/movies/${ movieId }`, {\r\n      method: 'DELETE',\r\n      credentials: 'include',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n}\r\n\r\nconst moviesApi = new MoviesApi({\r\n  mainBaseURL: MAIN_API_BASE_URL,\r\n  moviesBaseURL: MOVIES_API_BASE_URL\r\n});\r\n\r\nexport default moviesApi;\r\n","import React from 'react';\r\n\r\nconst CurrentUserContext = React.createContext();\r\n\r\nexport default CurrentUserContext;\r\n","import React from 'react';\r\n\r\nconst IsLoggedInContext = React.createContext();\r\n\r\nexport default IsLoggedInContext;\r\n","import React from 'react';\r\n\r\nconst IsDataLoadingContext = React.createContext();\r\n\r\nexport default IsDataLoadingContext;\r\n","export default __webpack_public_path__ + \"static/media/current-user-avatar.0f46e148.jpg\";","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nimport IsLoggedInContext from '../../contexts/IsLoggedInContext';\r\n\r\nfunction ProtectedRoute(props) {\r\n  const isLoggedIn = React.useContext(IsLoggedInContext);\r\n\r\n  return (\r\n    <Route path={ props.path }>\r\n      { isLoggedIn ? props.children : <Redirect to={ props.defaultPath } /> }\r\n    </Route>\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","export default __webpack_public_path__ + \"static/media/website-logo.34db3350.svg\";","import { Link } from 'react-router-dom';\r\n\r\nimport websiteLogo from '../../images/website-logo.svg';\r\n\r\nimport './logo.css';\r\n\r\nfunction Logo() {\r\n  return (\r\n    <Link to=\"/\">\r\n      <img className=\"logo\" src={ websiteLogo } alt=\"Логотип сайта\" />\r\n    </Link>\r\n  );\r\n}\r\n\r\nexport default Logo;\r\n","export default __webpack_public_path__ + \"static/media/default-student-avatar.c2cd1605.svg\";","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport CurrentUserContext from '../../contexts/CurrentUserContext';\r\nimport IsLoggedInContext from '../../contexts/IsLoggedInContext';\r\nimport defaultStudentAvatar from '../../images/default-student-avatar.svg';\r\n\r\nimport './navigation.css';\r\nimport './navigation_location_promo.css';\r\nimport './navigation_location_main.css';\r\nimport './navigation_location_menu.css';\r\nimport './navigation__link.css';\r\nimport './navigation__link_active.css';\r\nimport './navigation__link_type_registry.css';\r\nimport './navigation__link_type_login.css';\r\nimport './navigation__link_type_profile.css';\r\nimport './navigation__profile-avatar.css';\r\n\r\nfunction Navigation(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isLoggedIn = React.useContext(IsLoggedInContext);\r\n\r\n  return (\r\n    <nav className={ 'navigation ' + (\r\n      isLoggedIn ?\r\n        (props.location ? `navigation_location_${ props.location }` : '')\r\n      :\r\n        'navigation_location_promo'\r\n      )\r\n    }>\r\n      { \r\n        !isLoggedIn &&\r\n          <>\r\n            <NavLink\r\n              className=\"navigation__link navigation__link_type_registry\"\r\n              to=\"/signup\"\r\n            >\r\n              Регистрация\r\n            </NavLink>\r\n            <NavLink\r\n              className=\"navigation__link navigation__link_type_login\"\r\n              to=\"/signin\"\r\n            >\r\n              Войти\r\n            </NavLink>\r\n          </>\r\n      }\r\n      {\r\n        isLoggedIn && props.location === 'main' &&\r\n          <>\r\n            <NavLink\r\n              className=\"navigation__link\"\r\n              activeClassName=\"navigation__link_active\"\r\n              to=\"/movies\"\r\n            >\r\n              Фильмы\r\n            </NavLink>\r\n            <NavLink\r\n              className=\"navigation__link\"\r\n              activeClassName=\"navigation__link_active\"\r\n              to=\"/saved-movies\"\r\n            >\r\n              Сохранённые фильмы\r\n            </NavLink>\r\n            <NavLink\r\n              className=\"navigation__link navigation__link_type_profile\"\r\n              activeClassName=\"navigation__link_active\"\r\n              to=\"/profile\"\r\n            >\r\n              Аккаунт\r\n              <img\r\n                className=\"navigation__profile-avatar\"\r\n                src={ currentUser.avatar || defaultStudentAvatar }\r\n                alt=\"Аватар студента\"\r\n              />\r\n            </NavLink>\r\n          </>\r\n      }\r\n      {\r\n        isLoggedIn && props.location === 'menu' &&\r\n          <>\r\n            <NavLink\r\n              exact\r\n              className=\"navigation__link\"\r\n              activeClassName=\"navigation__link_active\"\r\n              to=\"/\"\r\n            >\r\n              Главная\r\n            </NavLink>\r\n            <NavLink\r\n              className=\"navigation__link\"\r\n              activeClassName=\"navigation__link_active\"\r\n              to=\"/movies\"\r\n            >\r\n              Фильмы\r\n            </NavLink>\r\n            <NavLink\r\n              className=\"navigation__link\"\r\n              activeClassName=\"navigation__link_active\"\r\n              to=\"/saved-movies\"\r\n            >\r\n              Сохранённые фильмы\r\n            </NavLink>\r\n            <NavLink\r\n              className=\"navigation__link navigation__link_type_profile\"\r\n              activeClassName=\"navigation__link_active\"\r\n              to=\"/profile\"\r\n            >\r\n              Аккаунт\r\n              <img\r\n                className=\"navigation__profile-avatar\"\r\n                src={ currentUser.avatar || defaultStudentAvatar }\r\n                alt=\"Аватар студента\" />\r\n            </NavLink>\r\n          </>\r\n      }\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navigation;\r\n","import './menu-button.css';\r\nimport './menu-button_location_main.css';\r\nimport './menu-button_location_menu.css';\r\n\r\nfunction MenuButton(props) {\r\n  return (\r\n    <button\r\n      className={ 'menu-button ' + (props.location ? `menu-button_location_${ props.location }` : '') }\r\n      onClick={ props.onMenuOpen }\r\n    />\r\n  );\r\n}\r\n\r\nexport default MenuButton;\r\n","import React from 'react';\r\n\r\nimport Logo from '../Logo/Logo';\r\nimport Navigation from '../Navigation/Navigation';\r\nimport MenuButton from '../MenuButton/MenuButton';\r\n\r\nimport IsLoggedInContext from '../../contexts/IsLoggedInContext';\r\n\r\nimport './header.css';\r\n\r\nfunction Header(props) {\r\n  const isLoggedIn = React.useContext(IsLoggedInContext);\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <Logo />\r\n      <Navigation location={ props.location } />\r\n      {\r\n        isLoggedIn && <MenuButton location={ props.location } onMenuOpen={ props.onMenuOpen } />\r\n      }\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import { HashLink } from 'react-router-hash-link';\r\n\r\nimport './nav-tab.css';\r\nimport './nav-tab__link.css';\r\n\r\nfunction NavTab(props) {\r\n  return (\r\n    <div className={ 'nav-tab ' + props.addClasses }>\r\n      <HashLink className=\"nav-tab__link\" to=\"/#about-project\">О проекте</HashLink>\r\n      <HashLink className=\"nav-tab__link\" to=\"/#techs\">Технологии</HashLink>\r\n      <HashLink className=\"nav-tab__link\" to=\"/#about-me\">Студент</HashLink>    \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NavTab;\r\n","import NavTab from '../NavTab/NavTab';\r\n\r\nimport './promo.css';\r\nimport './promo__banner.css';\r\nimport './promo__title.css';\r\nimport './promo__nav-tab.css';\r\n\r\nfunction Promo() {\r\n  return (\r\n    <section className=\"promo\">\r\n      <div className=\"promo__banner\">\r\n        <h1 className=\"promo__title\">Учебный проект студента факультета Веб&#8209;разработки.</h1>\r\n        <NavTab addClasses=\"promo__nav-tab\" />\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Promo;\r\n","import './section-header.css';\r\n\r\nfunction SectionHeader(props) {\r\n  return (\r\n    <h2 className={ 'section-header ' + (props.addClasses || '') }>{ props.children }</h2>\r\n  );\r\n}\r\n\r\nexport default SectionHeader;\r\n","import './plan-grid.css';\r\nimport './plan-grid__background.css';\r\nimport './plan-grid__background_color_green.css';\r\nimport './plan-grid__background_color_grey.css';\r\nimport './plan-grid__text.css';\r\nimport './plan-grid__text_quarter_one.css';\r\nimport './plan-grid__text_quarter_two.css';\r\nimport './plan-grid__text_quarter_three.css';\r\nimport './plan-grid__text_quarter_four.css';\r\n\r\nfunction PlanGrid(props) {\r\n  return (\r\n    <div className={ 'plan-grid ' + props.addClasses }>\r\n      <div className=\"plan-grid__background plan-grid__background_color_green\">\r\n        <p className=\"plan-grid__text plan-grid__text_quarter_one\">1 неделя</p>\r\n      </div>\r\n      <div className=\"plan-grid__background plan-grid__background_color_grey\">\r\n        <p className=\"plan-grid__text plan-grid__text_quarter_two\">4 недели</p>\r\n      </div>\r\n      <p className=\"plan-grid__text plan-grid__text_quarter_three\">Back-end</p>\r\n      <p className=\"plan-grid__text plan-grid__text_quarter_four\">Front-end</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PlanGrid;\r\n","import SectionHeader from '../SectionHeader/SectionHeader';\r\nimport PlanGrid from '../PlanGrid/PlanGrid';\r\n\r\nimport './about-project.css';\r\nimport './about-project__text-container.css';\r\nimport './about-project__textbox.css';\r\nimport './about-project__textbox-title.css';\r\nimport './about-project__textbox-text.css';\r\nimport './about-project__plan-grid.css';\r\n\r\nfunction AboutProject() {\r\n  return (\r\n    <section className=\"about-project\" id=\"about-project\">\r\n      <SectionHeader>О проекте</SectionHeader>\r\n      <div className=\"about-project__text-container\">\r\n        <div className=\"about-project__textbox\">\r\n          <p className=\"about-project__textbox-title\">\r\n            Дипломный проект включал 5 этапов\r\n          </p>\r\n          <p className=\"about-project__textbox-text\">\r\n            Составление плана, работу над бэкендом, вёрстку, добавление функциональности и финальные доработки.\r\n          </p>\r\n        </div>\r\n        <div className=\"about-project__textbox\">\r\n          <p className=\"about-project__textbox-title\">\r\n            На выполнение диплома ушло 5 недель\r\n          </p>\r\n          <p className=\"about-project__textbox-text\">\r\n            У каждого этапа был мягкий и жёсткий дедлайн, которые нужно было соблюдать, чтобы успешно защититься.\r\n          </p>\r\n        </div>\r\n        <div className=\"about-project__textbox\">\r\n          <p className=\"about-project__textbox-title\">\r\n            На выполнение диплома ушло 5 недель\r\n          </p>\r\n          <p className=\"about-project__textbox-text\">\r\n            У каждого этапа был мягкий и жёсткий дедлайн, которые нужно было соблюдать, чтобы успешно защититься.\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <PlanGrid addClasses=\"about-project__plan-grid\" />\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default AboutProject;\r\n","import SectionHeader from '../SectionHeader/SectionHeader';\r\n\r\nimport './techs.css';\r\nimport './techs__title.css';\r\nimport './techs__description.css';\r\nimport './techs__link-list.css';\r\nimport './techs__link.css';\r\n\r\nfunction Techs() {\r\n  return (\r\n    <section className=\"techs\" id=\"techs\">\r\n      <SectionHeader>Технологии</SectionHeader>\r\n      <p className=\"techs__title\">7 технологий</p>\r\n      <p className=\"techs__description\">\r\n        На курсе веб-разработки мы освоили технологии, которые применили в дипломном проекте.\r\n      </p>\r\n      <ul className=\"techs__link-list\">\r\n        <li>\r\n          <a\r\n            className=\"techs__link\"\r\n            href=\"https://developer.mozilla.org/ru/docs/Web/HTML/\"\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n          >\r\n            HTML\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <a\r\n            className=\"techs__link\"\r\n            href=\"https://developer.mozilla.org/ru/docs/Web/CSS/\"\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n          >\r\n            CSS\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <a\r\n            className=\"techs__link\"\r\n            href=\"https://developer.mozilla.org/ru/docs/Web/JavaScript/\"\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n          >\r\n            JS\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <a\r\n            className=\"techs__link\"\r\n            href=\"https://reactjs.org/\"\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n          >\r\n            React\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <a\r\n            className=\"techs__link\"\r\n            href=\"https://git-scm.com/\"\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n          >\r\n            Git\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <a\r\n            className=\"techs__link\"\r\n            href=\"https://expressjs.com/\"\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n          >\r\n            Express.js\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <a\r\n            className=\"techs__link\"\r\n            href=\"https://www.mongodb.com/\"\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n          >\r\n            mongoDB\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Techs;\r\n","import React from 'react';\r\n\r\nimport CurrentUserContext from '../../contexts/CurrentUserContext';\r\n\r\nimport './portfolio.css';\r\nimport './portfolio__title.css';\r\nimport './portfolio__link-container.css';\r\nimport './portfolio__link.css';\r\nimport './portfolio__link-text.css';\r\n\r\nfunction Portfolio(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    currentUser.portfolio.length !== 0 &&\r\n      <article className={ 'portfolio ' + (props.addClasses || '') }>\r\n        <h3 className=\"portfolio__title\">Портфолио</h3>\r\n        {\r\n          currentUser.portfolio.map((app, i) => {\r\n            return (\r\n              <div className=\"portfolio__link-container\" key={ i }>\r\n                <a\r\n                  className=\"portfolio__link\"\r\n                  href={ app.link }\r\n                  target=\"_black\"\r\n                  rel=\"noreferrer\"\r\n                >\r\n                  <p className=\"portfolio__link-text\">{ app.name }</p>\r\n                  <p className=\"portfolio__link-text\">↗</p>\r\n                </a>\r\n              </div>\r\n            );\r\n          })\r\n        }\r\n      </article>\r\n  );\r\n}\r\n\r\nexport default Portfolio;\r\n","import React from 'react';\r\n\r\nimport CurrentUserContext from '../../contexts/CurrentUserContext';\r\nimport defaultStudentAvatar from '../../images/default-student-avatar.svg';\r\n\r\nimport './student-card.css';\r\nimport './student-card__text-container.css';\r\nimport './student-card__name.css';\r\nimport './student-card__bio.css';\r\nimport './student-card__description.css';\r\nimport './student-card__link-list.css';\r\nimport './student-card__link.css';\r\nimport './student-card__avatar.css';\r\n\r\nfunction StudentCard(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <article className={ 'student-card ' + (props.addClasses || '') }>\r\n      <div className=\"student-card__text-container\">\r\n        { currentUser.name && <p className=\"student-card__name\">{ currentUser.name }</p> }\r\n        { currentUser.bio && <p className=\"student-card__bio\">{ currentUser.bio }</p> }\r\n        { currentUser.description && <p className=\"student-card__description\">{ currentUser.description }</p> }\r\n        { currentUser.accounts.length !== 0 && \r\n          <ul className=\"student-card__link-list\">\r\n            {\r\n              currentUser.accounts.map((account, i) => {\r\n                return (\r\n                  <li key={ i }>\r\n                    <a className=\"student-card__link\" href={ account.link } target=\"_blank\" rel=\"noreferrer\">\r\n                      { account.name }\r\n                    </a>\r\n                  </li>\r\n                );\r\n              })\r\n            }\r\n          </ul>\r\n        }\r\n      </div>\r\n      <img\r\n        className=\"student-card__avatar\"\r\n        src={ currentUser.avatar || defaultStudentAvatar } \r\n        alt=\"Аватар студента\"\r\n      />\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default StudentCard;\r\n","import SectionHeader from '../SectionHeader/SectionHeader';\r\nimport Portfolio from '../Portfolio/Portfolio';\r\nimport StudentCard from '../StudentCard/StudentCard';\r\n\r\nimport './about-me.css';\r\nimport './about-me__section-header.css';\r\nimport './about-me__student-card.css';\r\nimport './about-me__portfolio.css';\r\n\r\nfunction AboutMe() {\r\n  return (\r\n    <section className=\"about-me\" id=\"about-me\">\r\n      <SectionHeader addClasses=\"about-me__section-header\">Студент</SectionHeader>\r\n      <StudentCard addClasses=\"about-me__student-card\" />\r\n      <Portfolio addClasses=\"about-me__portfolio\" />\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default AboutMe;\r\n","import Promo from '../Promo/Promo';\r\nimport AboutProject from '../AboutProject/AboutProject';\r\nimport Techs from '../Techs/Techs';\r\nimport AboutMe from '../AboutMe/AboutMe';\r\n\r\nimport './main.css';\r\n\r\nfunction Main() {\r\n  return (\r\n    <main className=\"main\">\r\n      <Promo />\r\n      <AboutProject />\r\n      <Techs />\r\n      <AboutMe />\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\nimport CurrentUserContext from '../../contexts/CurrentUserContext';\r\n\r\nimport './footer.css';\r\nimport './footer__description.css';\r\nimport './footer__container.css';\r\nimport './footer__copyright.css';\r\nimport './footer__link-list.css';\r\nimport './footer__link.css';\r\n\r\nfunction Footer() {\r\n  const currentUser = React.useContext(CurrentUserContext);  \r\n  const currentYear = new Date().getFullYear();\r\n  \r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__description\">Учебный проект Яндекс.Практикум х BeatFilm.</p>\r\n      <div className=\"footer__container\">\r\n        <p className=\"footer__copyright\">© { currentYear }</p>\r\n        <ul className=\"footer__link-list\">\r\n          <li>\r\n            <a className=\"footer__link\" href=\"https://practicum.yandex.ru/\" target=\"_black\" rel=\"noreferrer\">\r\n              Яндекс.Практикум\r\n            </a>\r\n          </li>\r\n          {\r\n            currentUser.accounts.map((account, i) => {\r\n              return (\r\n                <li key={ i }>\r\n                  <a className=\"footer__link\" href={ account.link } target=\"_black\" rel=\"noreferrer\">\r\n                    { account.name }\r\n                  </a>\r\n                </li>\r\n              );\r\n            })\r\n          }\r\n        </ul>\r\n      </div>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\n\r\nimport './filter-checkbox.css';\r\nimport './filter-checkbox__input.css';\r\nimport './filter-checkbox__label.css';\r\nimport './filter-checkbox__label_checked.css';\r\n\r\nfunction FilterCheckbox(props) {\r\n  return (\r\n    <div className={ 'filter-checkbox ' + (props.addClasses || '') }>\r\n      <input className=\"filter-checkbox__input\" id=\"filter-__input\" type=\"checkbox\" />\r\n      <label \r\n        className={ 'filter-checkbox__label ' + (props.isChecked ? 'filter-checkbox__label_checked' : '') }\r\n        htmlFor=\"filter-checkbox__input\"\r\n        onClick={ props.onCheck }\r\n      >\r\n        Короткометражки\r\n      </label>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FilterCheckbox;\r\n","import React from 'react';\r\n\r\nimport IsDataLoadingContext from '../../contexts/IsDataLoadingContext';\r\n\r\nimport FilterCheckbox from '../FilterCheckbox/FilterCheckbox';\r\n\r\nimport './search-form.css';\r\nimport './search-form__input.css';\r\nimport './search-form__submit-button.css';\r\nimport './search-form__filter-checkbox.css';\r\n\r\nfunction SearchForm(props) {\r\n  const isDataloading = React.useContext(IsDataLoadingContext);\r\n\r\n  const [ searchQuery, setSearchQuery ] = React.useState('');\r\n  const [ isFormValid, setIsFormValid ] = React.useState(false);\r\n\r\n  const [ isShortMovie, setIsShortMovie ] = React.useState(false);\r\n\r\n  function handleMovieTitleInput(evt) {\r\n    const { value } = evt.target;\r\n\r\n    setSearchQuery(value);\r\n    setIsFormValid(value.length !== 0);\r\n  }\r\n\r\n  function handleFilterCheckboxCheck() {\r\n    setIsShortMovie(!isShortMovie);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    \r\n    if (isFormValid || props.page === 'saved-movies') {\r\n      props.onMoviesSearch(searchQuery, isShortMovie);\r\n    }\r\n    else console.log('Нужно ввести ключевое слово');\r\n  }\r\n\r\n  return (\r\n    <form className=\"search-form\">\r\n      <input\r\n        className=\"search-form__input\"\r\n        placeholder=\"Поиск фильма\"\r\n        autoComplete=\"off\"\r\n        spellCheck=\"false\"\r\n        required\r\n        type=\"text\"\r\n        value={ searchQuery }\r\n        onChange={ handleMovieTitleInput }\r\n      />\r\n      <button\r\n        className=\"search-form__submit-button\"\r\n        onClick={ handleSubmit }\r\n        disabled={ isDataloading }\r\n      >\r\n        Найти\r\n      </button>\r\n      <FilterCheckbox\r\n        addClasses=\"search-form__filter-checkbox\"\r\n        onCheck={ handleFilterCheckboxCheck }\r\n        isChecked={ isShortMovie }\r\n      />\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default SearchForm;\r\n","import './preloader.css';\r\nimport './preloader__container.css';\r\nimport './preloader__round.css';\r\n\r\nfunction Preloader() {\r\n  return (\r\n    <div className=\"preloader\">\r\n      <div className=\"preloader__container\">\r\n          <span className=\"preloader__round\" />\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Preloader;\r\n","import React from 'react';\r\n\r\nimport './movie-card.css';\r\nimport './movie-card__header.css';\r\nimport './movie-card__caption.css';\r\nimport './movie-card__duration-info.css';\r\nimport './movie-card__link.css';\r\nimport './movie-card__thumbnail.css';\r\nimport './movie-card__add-button.css';\r\nimport './movie-card__add-button_state_added.css';\r\nimport './movie-card__add-button_state_saved.css';\r\n\r\nfunction MoviesCard(props) {\r\n  let addButtonClass = '';\r\n\r\n  if (props.page === 'movies' && props.isSaved) addButtonClass = 'movie-card__add-button_state_added';\r\n  else if (props.page === 'saved-movies' && props.isSaved) addButtonClass= 'movie-card__add-button_state_saved';\r\n\r\n  function handleMovieSave() {\r\n    if (props.isSaved) {\r\n      props.onDelete(props.movie._id);\r\n      props.onFilteredMovieDelete(props.movie._id);\r\n    }\r\n    else props.onSave(props.movie);\r\n  }\r\n\r\n  return (\r\n    <div className=\"movie-card\">\r\n      <div className=\"movie-card__header\">\r\n        <p className=\"movie-card__caption\">{ props.movie.nameRU || props.movie.nameEN }</p>\r\n        <p className=\"movie-card__duration-info\">{ props.movie.duration + ' минут(ы)' }</p>\r\n      </div>\r\n      <a\r\n        className=\"movie-card__link\"\r\n        href={ props.movie.trailer }\r\n        target=\"_blank\"\r\n        rel=\"noreferrer\"\r\n      >\r\n        <img\r\n          className=\"movie-card__thumbnail\"\r\n          src={ props.movie.image }\r\n          alt=\"Постер фильма\"\r\n        />\r\n      </a>\r\n      <button\r\n        className={ 'movie-card__add-button ' + addButtonClass }\r\n        onClick={ handleMovieSave }\r\n      >\r\n        { props.isSaved ? '' : 'Сохранить' }\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MoviesCard;\r\n","import React from 'react';\r\n\r\nimport IsDataLoadingContext from '../../contexts/IsDataLoadingContext';\r\n\r\nimport Preloader from '../Preloader/Preloader';\r\nimport MoviesCard from '../MoviesCard/MoviesCard';\r\n\r\nimport './movies-card-list.css';\r\nimport './movies-card-list__text.css';\r\n\r\nfunction MoviesCardList(props) {\r\n  const isDataloading = React.useContext(IsDataLoadingContext);\r\n\r\n  function handleFilteredMovieDelete(deletedMovieId) {\r\n    props.inSearch && props.onFilteredMovieDelete(props.filteredMoviesList, deletedMovieId);\r\n  }\r\n\r\n  return (\r\n    <section className={ 'movies-card-list ' + (props.addClasses || '') }>\r\n      {\r\n        isDataloading && <Preloader />\r\n      }\r\n      {\r\n        props.page === 'movies' && !isDataloading && (\r\n          props.displayedMoviesList.length ? \r\n            props.displayedMoviesList.map((displayedMovie) => {\r\n              const savedMovie = props.savedMoviesList.find((savedMovie) => {\r\n                return savedMovie.movieId === displayedMovie.movieId;\r\n              });\r\n\r\n              const movie = savedMovie || displayedMovie;\r\n\r\n              return (\r\n                <MoviesCard\r\n                  key={ movie.movieId }\r\n                  page=\"movies\"\r\n                  movie={ movie }\r\n                  isSaved={ !!savedMovie }\r\n                  onSave={ props.onMovieSave }\r\n                  onDelete={ props.onMovieDelete }\r\n                  onFilteredMovieDelete={ handleFilteredMovieDelete }\r\n                />\r\n              );\r\n            })\r\n          :\r\n            <p className=\"movies-card-list__text\">Ничего не найдено</p>\r\n        )\r\n      }\r\n      {\r\n        props.page === 'saved-movies' && (\r\n          props.inSearch ?\r\n            props.filteredMoviesList.length ?\r\n              props.filteredMoviesList.map((movie) => {\r\n                return (\r\n                  <MoviesCard\r\n                    key={ movie.movieId }\r\n                    page=\"saved-movies\"\r\n                    movie={ movie }\r\n                    isSaved={ true }\r\n                    onDelete={ props.onMovieDelete }                    \r\n                    onFilteredMovieDelete={ handleFilteredMovieDelete }\r\n                  />\r\n                );\r\n              })\r\n            :\r\n              <p className=\"movies-card-list__text\">Ничего не найдено</p>\r\n          :\r\n            props.savedMoviesList.map((movie) => {\r\n              return (\r\n                <MoviesCard\r\n                  key={ movie.movieId }\r\n                  page=\"saved-movies\"\r\n                  movie={ movie }\r\n                  isSaved={ true }\r\n                  onDelete={ props.onMovieDelete }\r\n                  onFilteredMovieDelete={ handleFilteredMovieDelete }\r\n                />\r\n              );\r\n            })\r\n        )\r\n      }\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default MoviesCardList;\r\n","import './movies-uploader.css';\r\nimport './movies-uploader__button.css';\r\n\r\nfunction MoviesUploader(props) {\r\n  return (\r\n    <div className=\"movies-uploader\">\r\n      <button\r\n        className=\"movies-uploader__button\"\r\n        onClick={ props.onButtonClick }\r\n      >\r\n        Еще\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MoviesUploader;\r\n","import React from 'react';\r\n\r\nimport SearchForm from '../SearchForm/SearchForm';\r\nimport MoviesCardList from '../MoviesCardList/MoviesCardList';\r\nimport MoviesUploader from '../MoviesUploader/MoviesUploader';\r\n\r\nimport './movies.css';\r\n\r\nfunction Movies(props) {\r\n  return (\r\n    <main className=\"movies\">\r\n      <SearchForm\r\n        page=\"movies\"\r\n        onMoviesSearch={ props.onMoviesSearch }\r\n      />\r\n      {\r\n        (props.displayedMoviesList.length || props.isSearchButtonClicked) && <MoviesCardList\r\n          page=\"movies\"\r\n          foundMoviesList={ props.foundMoviesList }\r\n          displayedMoviesList={ props.displayedMoviesList }\r\n          savedMoviesList={ props.savedMoviesList }\r\n          onMovieSave={ props.onMovieSave }\r\n          onMovieDelete={ props.onMovieDelete }\r\n        />\r\n      }\r\n      {\r\n        props.displayedMoviesList.length !== props.foundMoviesList.length && <MoviesUploader\r\n          onButtonClick={ props.onUploaderClick }\r\n        />\r\n      }\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Movies;\r\n","import React from 'react';\r\n\r\nimport moviesFilter from '../../utils/moviesFilter';\r\n\r\nimport SearchForm from '../SearchForm/SearchForm';\r\nimport MoviesCardList from '../MoviesCardList/MoviesCardList';\r\n\r\nimport './saved-movies.css';\r\nimport './saved-movies__movies-card-list.css';\r\n\r\nfunction SavedMovies(props) {\r\n  const [ filteredMoviesList, setFilteredMoviesList ] = React.useState([]);\r\n  const [ inSearch, setInSearch ] = React.useState(false);\r\n\r\n  function handleFilteredMovieDelete(filteredMoviesList, deletedMovieId) {\r\n    setFilteredMoviesList(filteredMoviesList.filter((movie) => movie._id !== deletedMovieId));\r\n  }\r\n   \r\n  function handleSavedMoviesSearch(searchQuery, isShort) {\r\n    if (searchQuery) {\r\n      const filteredMovies = moviesFilter.searchFilter(props.savedMoviesList, searchQuery, isShort);\r\n\r\n      setFilteredMoviesList(filteredMovies);\r\n      setInSearch(true);\r\n    }\r\n    else setInSearch(false);\r\n  }\r\n\r\n  return (\r\n    <main className=\"saved-movies\">\r\n      <SearchForm\r\n        page=\"saved-movies\"\r\n        onMoviesSearch={ handleSavedMoviesSearch }\r\n      />\r\n      {\r\n        props.savedMoviesList.length && <MoviesCardList\r\n          addClasses=\"saved-movies__movies-card-list\"\r\n          page=\"saved-movies\"\r\n          savedMoviesList={ props.savedMoviesList }\r\n          filteredMoviesList={ filteredMoviesList }\r\n          inSearch={ inSearch }\r\n          onMovieDelete={ props.onMovieDelete }\r\n          onFilteredMovieDelete={ handleFilteredMovieDelete }\r\n        />\r\n      }\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default SavedMovies;\r\n","import React from 'react';\r\n\r\nimport IsDataLoadingContext from '../../contexts/IsDataLoadingContext';\r\n\r\nimport './profile-form.css';\r\nimport './profile-form__input-span.css';\r\nimport './profile-form__input-span_visible.css';\r\nimport './profile-form__submit-button.css';\r\nimport './profile-form__submit-button_disabled.css';\r\n\r\nfunction ProfileForm(props) {\r\n  const isDataLoading = React.useContext(IsDataLoadingContext);\r\n\r\n  return (\r\n    <form className={ 'profile-form ' + (props.addClasses || '') }>\r\n      { props.children }\r\n      <span\r\n        className={ 'profile-form__input-span ' + (props.isSpanVisible ?\r\n            'profile-form__input-span_visible'\r\n          :\r\n            ''\r\n        )}\r\n      >\r\n        { props.spanText }\r\n      </span>\r\n      <button\r\n        className={ 'profile-form__submit-button ' + (props.isFormValid && !isDataLoading ? \r\n            ''\r\n          :\r\n            'profile-form__submit-button_disabled'\r\n        )} \r\n        onClick={ props.onSubmit }\r\n        disabled={ !props.isFormValid || isDataLoading }\r\n      >\r\n        { isDataLoading ? 'Сохранение...' : 'Редактировать' }\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default ProfileForm;\r\n","import React from 'react';\r\n\r\nimport IsDataLoadingContext from '../../contexts/IsDataLoadingContext';\r\n\r\nimport './profile-form__input.css';\r\nimport './profile-form__input-label.css';\r\nimport './profile-form__input-label_last.css';\r\n\r\nfunction ProfileFormInput(props) {\r\n  const isDataloading = React.useContext(IsDataLoadingContext);\r\n\r\n  return (\r\n    <label className={ 'profile-form__input-label ' + (props.addClasses || '') }>\r\n      { props.labelText }\r\n      <input\r\n        className=\"profile-form__input\"\r\n        minLength={ props.minLength }\r\n        maxLength={ props.maxLength }\r\n        placeholder={ props.placeholder }\r\n        autoComplete=\"off\"\r\n        spellCheck=\"false\"\r\n        disabled={ isDataloading }\r\n        type={ props.type }\r\n        value={ props.value }\r\n        onChange={ props.onChange }\r\n      />\r\n    </label>\r\n  );\r\n}\r\n\r\nexport default ProfileFormInput;\r\n","import React from 'react';\r\nimport Validator from 'validator';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { USER_NAME_REGEXP } from '../../config';\r\n\r\nimport CurrentUserContext from '../../contexts/CurrentUserContext';\r\n\r\nimport ProfileForm from '../ProfileForm/ProfileForm';\r\nimport ProfileFormInput from '../ProfileFormInput/ProfileFormInput';\r\n\r\nimport './profile.css';\r\nimport './profile__form-container.css';\r\nimport './profile__title.css';\r\nimport './profile__form.css';\r\nimport './profile__logout-link.css';\r\n\r\nfunction Profile(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const [ userName, setUserName ] = React.useState('');\r\n  const [ userEmail, setUserEmail ] = React.useState('');\r\n\r\n  const [ isValidUserName, setIsValidUserName ] = React.useState(true);\r\n  const [ isValidUserEmail, setIsValidUserEmail ] = React.useState(true);\r\n\r\n  const [ spanText, setSpanText ] = React.useState('');\r\n  const [ userNameSpanText, setUserNameSpanText ] = React.useState('');\r\n  const [ userEmailSpanText, setUserEmailSpanText ] = React.useState('');\r\n\r\n  const [ isFormValid, setIsFormValid ] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if ((!userName && !userEmail) || !isValidUserName || !isValidUserEmail) setIsFormValid(false);\r\n    else setIsFormValid(true);\r\n\r\n    if (!isValidUserName) setSpanText(userNameSpanText);\r\n    else if (!isValidUserEmail) setSpanText(userEmailSpanText);\r\n    else setSpanText('');\r\n\r\n  }, [ userName, userEmail, isValidUserName, isValidUserEmail, userNameSpanText, userEmailSpanText ]);\r\n\r\n  function handleUserNameInput(evt) {\r\n    const { value, validity: { valid } } = evt.target;\r\n\r\n    setUserName(value);\r\n    setIsValidUserName((Validator.matches(value, USER_NAME_REGEXP) && valid && (value !== currentUser.name)) || !value);\r\n\r\n    if (!Validator.matches(value, USER_NAME_REGEXP)) {\r\n      setUserNameSpanText('Допустимы только символы: А-Я(A-Z), а-я(a-z), тире или пробел');\r\n    }\r\n    else if (value === currentUser.name) {\r\n      setUserNameSpanText('Введённое имя совпадает с текущим');\r\n    }\r\n    else if (!valid) {\r\n      setUserNameSpanText('Длина имени должна быть от 2 до 30 символов');\r\n    }\r\n  }\r\n\r\n  function handleUserEmailInput(evt) {\r\n    const { value } = evt.target;\r\n\r\n    setUserEmail(value);\r\n    setIsValidUserEmail((Validator.isEmail(value) && (value !== currentUser.email)) || !value);\r\n\r\n    if (value === currentUser.email) {\r\n      setUserEmailSpanText('Введённый E-mail совпадает с текущим');\r\n    }\r\n    else if (!Validator.isEmail(value)) {\r\n      setUserEmailSpanText('Некорректный формат E-mail');\r\n    }\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    \r\n    props.onUserUpdate({\r\n      email: userEmail || currentUser.email,\r\n      name: userName || currentUser.name\r\n    });\r\n    \r\n    setIsFormValid(false);\r\n  }\r\n\r\n  return (\r\n    <section className=\"profile\">\r\n      <div className=\"profile__form-container\">\r\n        <h2 className=\"profile__title\">{ `Привет, ${ currentUser.name }` }</h2>\r\n        <ProfileForm\r\n          addClasses=\"profile__form\"\r\n          onSubmit={ handleSubmit }\r\n          isFormValid={ isFormValid }\r\n          spanText={ spanText }\r\n          isSpanVisible={ !isValidUserName || !isValidUserEmail }\r\n        >\r\n          <ProfileFormInput\r\n            minLength=\"2\"\r\n            maxLength=\"30\"\r\n            placeholder=\"Введите новое имя\"\r\n            labelText=\"Имя\"\r\n            type=\"text\"\r\n            value={ userName }\r\n            onChange={ handleUserNameInput }\r\n          />\r\n          <ProfileFormInput\r\n            addClasses=\"profile-form__input-label_last\"\r\n            placeholder=\"Введите новый E-mail\"\r\n            labelText=\"E-mail\"\r\n            type=\"email\"\r\n            value={ userEmail }\r\n            onChange={ handleUserEmailInput }\r\n          />\r\n        </ProfileForm>\r\n        <Link\r\n          className=\"profile__logout-link\"\r\n          to={ props.logoutLink }\r\n          onClick={ props.onLogout }\r\n        >\r\n          Выйти из аккаунта\r\n        </Link>\r\n      </div>      \r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","import React from 'react';\r\n\r\nimport IsDataLoadingContext from '../../contexts/IsDataLoadingContext';\r\n\r\nimport './auth-form.css';\r\nimport './auth-form__submit-button.css';\r\nimport './auth-form__submit-button_disabled.css';\r\n\r\nfunction AuthForm(props) {\r\n  const isDataLoading = React.useContext(IsDataLoadingContext);\r\n\r\n  return (\r\n      <form className={ 'auth-form ' + (props.addClasses || '') }>\r\n        { props.children }\r\n        <button\r\n          className={ 'auth-form__submit-button ' + (props.isFormValid && !isDataLoading ?\r\n              ''\r\n            :\r\n              'auth-form__submit-button_disabled'\r\n          )}\r\n          onClick={ props.onSubmit }\r\n          disabled={ !props.isFormValid || isDataLoading }\r\n        >\r\n          { isDataLoading ? 'Авторизация...' : props.submitButtonText }\r\n        </button>\r\n      </form>\r\n  );\r\n}\r\n\r\nexport default AuthForm;\r\n","import { Link } from 'react-router-dom';\r\n\r\nimport Logo from '../Logo/Logo';\r\nimport AuthForm from '../AuthForm/AuthForm';\r\n\r\nimport './auth-page.css';\r\nimport './auth-page__form-container.css';\r\nimport './auth-page__title.css';\r\nimport './auth-page__form.css';\r\nimport './auth-page__redirect-text.css';\r\nimport './auth-page__redirect-link.css';\r\n\r\nfunction AuthPage(props) {\r\n  return (\r\n    <section className=\"auth-page\">\r\n      <div className=\"auth-page__form-container\">\r\n        <Logo />\r\n        <h2 className=\"auth-page__title\">{ props.pageTitle }</h2>\r\n        <AuthForm\r\n          addClasses=\"auth-page__form\"\r\n          submitButtonText={ props.submitButtonText }\r\n          onSubmit={ props.onSubmit }\r\n          isFormValid={ props.isFormValid }\r\n        >\r\n          { props.children }\r\n        </AuthForm>\r\n        <p className=\"auth-page__redirect-text\">\r\n          { props.redirectText }\r\n          <Link\r\n            className=\"auth-page__redirect-link\"\r\n            to={ props.redirectLink }\r\n          >\r\n            { props.redirectLinkText }\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default AuthPage;\r\n","import React from 'react';\r\n\r\nimport IsDataLoadingContext from '../../contexts/IsDataLoadingContext';\r\n\r\nimport './auth-form__input.css';\r\nimport './auth-form__input-label.css';\r\nimport './auth-form__input-span.css';\r\nimport './auth-form__input-span_visible.css';\r\n\r\nfunction AuthFormInput(props) {\r\n  const isDataloading = React.useContext(IsDataLoadingContext);\r\n\r\n  return (\r\n    <>\r\n      <label className=\"auth-form__input-label\">\r\n        { props.labelText }\r\n        <input\r\n          className=\"auth-form__input\"\r\n          minLength={ props.minLength }\r\n          maxLength={ props.maxLength }\r\n          placeholder={ props.placeholder }\r\n          autoComplete=\"off\"\r\n          spellCheck=\"false\"\r\n          required\r\n          disabled={ isDataloading }\r\n          type={ props.type }\r\n          value={ props.value }\r\n          onChange={ props.onChange }\r\n        />\r\n      </label>\r\n      <span\r\n        className={ 'auth-form__input-span ' + (props.isSpanVisible ? 'auth-form__input-span_visible' : '') }\r\n      >\r\n        { props.spanText }\r\n      </span>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AuthFormInput;\r\n","import React from 'react';\r\nimport Validator from 'validator';\r\n\r\nimport { USER_NAME_REGEXP } from '../../config';\r\n\r\nimport AuthPage from \"../AuthPage/AuthPage\";\r\nimport AuthFormInput from \"../AuthFormInput/AuthFormInput\";\r\n\r\nfunction Register(props) {\r\n  const [ userName, setUserName ] = React.useState('');\r\n  const [ userEmail, setUserEmail ] = React.useState('');\r\n  const [ userPassword, setUserPassword ] = React.useState('');\r\n\r\n  const [ isValidUserName, setIsValidUserName ] = React.useState(false);\r\n  const [ isValidUserEmail, setIsValidUserEmail ] = React.useState(false);\r\n  const [ isValidUserPassword, setIsValidUserPassword ] = React.useState(false);\r\n\r\n  const [ userNameSpanText, setUserNameSpanText ] = React.useState('');\r\n  const [ userEmailSpanText, setUserEmailSpanText ] = React.useState('');\r\n  const [ userPasswordSpanText, setUserPasswordSpanText ] = React.useState('');\r\n\r\n  const [ isFormValid, setIsFormValid ] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (!isValidUserName || !isValidUserEmail || !isValidUserPassword) setIsFormValid(false);\r\n    else setIsFormValid(true);\r\n  }, [ isValidUserName, isValidUserEmail, isValidUserPassword ]);\r\n\r\n  function handleUserNameInput(evt) {\r\n    const { value, validity: { valid } } = evt.target;\r\n\r\n    setUserName(value);\r\n    setIsValidUserName(Validator.matches(value, USER_NAME_REGEXP) && valid);\r\n\r\n    if (!Validator.matches(value, USER_NAME_REGEXP)) {\r\n      setUserNameSpanText('Допустимы только символы: А-Я(A-Z), а-я(a-z), тире или пробел');\r\n    }\r\n    else if (!value) setUserNameSpanText('Поле не заполнено');\r\n    else if (!valid) setUserNameSpanText('Длина имени должна быть от 2 до 30 символов');\r\n  }\r\n\r\n  function handleUserEmailInput(evt) {\r\n    const { value } = evt.target;\r\n\r\n    setUserEmail(value);\r\n    setIsValidUserEmail(Validator.isEmail(value));\r\n\r\n    if (!value) setUserEmailSpanText('Поле не заполнено');\r\n    else setUserEmailSpanText('Некорректный формат E-mail');\r\n  }\r\n\r\n  function handleUserPasswordInput(evt) {\r\n    const { value, validity: { valid } } = evt.target;\r\n\r\n    setUserPassword(value);\r\n    setIsValidUserPassword(valid);\r\n\r\n    if (!value) setUserPasswordSpanText('Поле не заполнено');\r\n    else setUserPasswordSpanText('Длина пароля должна быть не менее 8 символов');\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    props.onRegister({\r\n      email: userEmail,\r\n      password: userPassword,\r\n      name: userName\r\n    });\r\n  }\r\n\r\n  return (\r\n    <AuthPage\r\n      pageTitle=\"Добро пожаловать!\"\r\n      submitButtonText=\"Зарегистрироваться\"\r\n      onSubmit={ handleSubmit }\r\n      isFormValid={ isFormValid }\r\n      redirectText=\"Уже зарегистрированы?\"\r\n      redirectLink=\"/signin\"\r\n      redirectLinkText=\"Войти\"\r\n    >\r\n      <AuthFormInput\r\n        minLength=\"2\"\r\n        maxLength=\"30\"\r\n        placeholder=\"Введите имя\"\r\n        labelText=\"Имя\"\r\n        type=\"text\"\r\n        value={ userName }\r\n        onChange={ handleUserNameInput }\r\n        spanText={ userNameSpanText }\r\n        isSpanVisible={ !isValidUserName }\r\n      />\r\n      <AuthFormInput\r\n        placeholder=\"Укажите адрес электронной почты\"\r\n        labelText=\"E-mail\"\r\n        type=\"email\"\r\n        value={ userEmail }\r\n        onChange={ handleUserEmailInput }\r\n        spanText={ userEmailSpanText }\r\n        isSpanVisible={ !isValidUserEmail }\r\n      />\r\n      <AuthFormInput\r\n        minLength=\"8\"\r\n        placeholder=\"Придумайте пароль\"\r\n        labelText=\"Пароль\"\r\n        type=\"password\"\r\n        value={ userPassword }\r\n        onChange={ handleUserPasswordInput }\r\n        spanText={ userPasswordSpanText }\r\n        isSpanVisible={ !isValidUserPassword }\r\n      />\r\n    </AuthPage>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React from 'react';\r\nimport Validator from 'validator';\r\n\r\nimport AuthPage from \"../AuthPage/AuthPage\";\r\nimport AuthFormInput from \"../AuthFormInput/AuthFormInput\";\r\n\r\nfunction Login(props) {\r\n  const [ userEmail, setUserEmail ] = React.useState('');\r\n  const [ userPassword, setUserPassword ] = React.useState('');\r\n\r\n  const [ isValidUserEmail, setIsValidUserEmail ] = React.useState(false);\r\n  const [ isValidUserPassword, setIsValidUserPassword ] = React.useState(false);\r\n\r\n  const [ userEmailSpanText, setUserEmailSpanText ] = React.useState('');\r\n  const [ userPasswordSpanText, setUserPasswordSpanText ] = React.useState('');\r\n\r\n  const [ isFormValid, setIsFormValid ] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (!isValidUserEmail || !isValidUserPassword) setIsFormValid(false);\r\n    else setIsFormValid(true);\r\n  }, [ isValidUserEmail, isValidUserPassword ]);\r\n\r\n  function handleUserEmailInput(evt) {\r\n    const { value } = evt.target;\r\n\r\n    setUserEmail(value);\r\n    setIsValidUserEmail(Validator.isEmail(value));\r\n\r\n    if (!value) setUserEmailSpanText('Поле не заполнено');\r\n    else setUserEmailSpanText('Некорректный формат E-mail');\r\n  }\r\n\r\n  function handleUserPasswordInput(evt) {\r\n    const { value, validity: { valid } } = evt.target;\r\n\r\n    setUserPassword(value);\r\n    setIsValidUserPassword(valid);\r\n\r\n    if (!value) setUserPasswordSpanText('Поле не заполнено');\r\n    else setUserPasswordSpanText('Длина пароля должна быть не менее 8 символов');\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    \r\n    props.onLogin({\r\n      email: userEmail,\r\n      password: userPassword\r\n    });\r\n  }\r\n\r\n  return (\r\n    <AuthPage\r\n      pageTitle=\"Рады видеть!\"\r\n      submitButtonText=\"Войти\"\r\n      onSubmit={ handleSubmit }\r\n      isFormValid={ isFormValid }\r\n      redirectText=\"Ещё не зарегистрированы?\"\r\n      redirectLink=\"/signup\"\r\n      redirectLinkText=\"Регистрация\"\r\n    >\r\n      <AuthFormInput\r\n        placeholder=\"Введите адрес электронной почты\"\r\n        labelText=\"E-mail\"\r\n        type=\"email\"\r\n        value={ userEmail }\r\n        onChange={ handleUserEmailInput }\r\n        spanText={ userEmailSpanText }\r\n        isSpanVisible={ !isValidUserEmail }\r\n      />\r\n      <AuthFormInput\r\n        minLength=\"8\"\r\n        placeholder=\"Введите пароль\"\r\n        labelText=\"Пароль\"\r\n        type=\"password\"\r\n        value={ userPassword }\r\n        onChange={ handleUserPasswordInput }\r\n        spanText={ userPasswordSpanText }\r\n        isSpanVisible={ !isValidUserPassword }\r\n      />\r\n    </AuthPage>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import MenuButton from '../MenuButton/MenuButton';\r\nimport Navigation from '../Navigation/Navigation';\r\n\r\nimport './menu.css';\r\nimport './menu__container.css';\r\nimport './menu_open.css';\r\n\r\nfunction Menu(props) {\r\n  return (\r\n    <aside className={ 'menu ' + (props.isOpen ? 'menu_open' : '') } onClick={ props.onMenuOpen }>\r\n      <div className=\"menu__container\" >\r\n        <MenuButton location=\"menu\" onMenuOpen={ props.onMenuOpen } />\r\n        <Navigation location=\"menu\" />\r\n      </div>\r\n    </aside>\r\n  );\r\n}\r\n\r\nexport default Menu;\r\n","import { Link, useHistory } from 'react-router-dom';\r\n\r\nimport './not-found-page.css';\r\nimport './not-found-page__title.css';\r\nimport './not-found-page__subtitle.css';\r\nimport './not-found-page__backward-link.css';\r\n\r\nfunction NotFoundPage() {\r\n  return (\r\n    <section className=\"not-found-page\">\r\n      <h2 className=\"not-found-page__title\">404</h2>\r\n      <p className=\"not-found-page__subtitle\">Страница не найдена</p>\r\n      <Link className=\"not-found-page__backward-link\" onClick={ useHistory().goBack } >Назад</Link>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default NotFoundPage;\r\n","import React from 'react';\r\n\r\nimport './error-info-popup.css';\r\nimport './error-info-popup_visible.css';\r\nimport './error-info-popup__text.css';\r\n\r\nfunction ErrorInfoPopup(props) {\r\n  return (\r\n    <div\r\n      className={ 'error-info-popup ' + (props.isOpen ? 'error-info-popup_visible' : '') }\r\n      onClick={ props.onClick }\r\n    >\r\n      <p className=\"error-info-popup__text\">{ props.message }</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ErrorInfoPopup;\r\n","import React from 'react';\r\nimport { Route, Switch, useHistory } from 'react-router-dom';\r\n\r\nimport { VIEWPORT_WIDTH_RESIZING_TIMEOUT, INFO_POPUP_TIMEOUT } from '../../config';\r\n\r\nimport viewportWidthListener from '../../utils/viewportWidthListener';\r\nimport moviesFilter from '../../utils/moviesFilter';\r\nimport moviesCountHandler from '../../utils/moviesCountHandler';\r\nimport errorHandler from '../../utils/errorHandler';\r\n\r\nimport authApi from '../../utils/authApi';\r\nimport userApi from '../../utils/userApi';\r\nimport moviesApi from '../../utils/moviesApi';\r\n\r\nimport CurrentUserContext from '../../contexts/CurrentUserContext';\r\nimport IsLoggedInContext from '../../contexts/IsLoggedInContext';\r\nimport IsDataLoadingContext from '../../contexts/IsDataLoadingContext';\r\n\r\nimport currentUserAvatar from '../../images/current-user-avatar.jpg';\r\n\r\nimport ProtectedRoute from '../ProtectedRoute/ProtectedRoute';\r\nimport Header from '../Header/Header';\r\nimport Main from '../Main/Main';\r\nimport Footer from '../Footer/Footer';\r\nimport Movies from '../Movies/Movies';\r\nimport SavedMovies from '../SavedMovies/SavedMovies';\r\nimport Profile from '../Profile/Profile';\r\nimport Register from '../Register/Register';\r\nimport Login from '../Login/Login';\r\nimport Menu from '../Menu/Menu';\r\nimport NotFoundPage from '../NotFoundPage/NotFoundPage';\r\nimport ErrorInfoPopup from '../ErrorInfoPopup/ErrorInfoPopup';\r\n\r\nimport './app.css';\r\nimport './app__container.css';\r\n\r\nfunction App() {\r\n  const history = useHistory();\r\n\r\n  const [ currentViewportWidth, setCurrentViewportWidth ] = React.useState(window.innerWidth);\r\n  const [ isViewportWidthResizing, setIsViewportWidthResizing ] = React.useState(false);\r\n  const [ isDataLoading, setIsDataLoading ] = React.useState(false);\r\n  const [ infoMessage, setInfoMessage ] = React.useState('');\r\n\r\n  const [ currentUser, setCurrentUser ] = React.useState({\r\n    name: 'Mouse Greys',\r\n    email: 'greys.mouse@yandex.ru',\r\n    bio: 'Фронтенд-разработчик, 24 года',\r\n    description: 'Живу в городе Ярославль. Закончила физический факультет по специальности электроника и наноэлектроника. Люблю решать математические задачки. В настоящее время обучаюсь в Яндекс Практикум.',\r\n    avatar: currentUserAvatar,\r\n    accounts: [\r\n      { name: 'Facebook', link: 'https://www.facebook.com/' },\r\n      { name: 'Github', link: 'https://github.com/GreysMouse/' }\r\n    ],\r\n    portfolio: [\r\n      { name: 'Статичный сайт', link: 'https://github.com/GreysMouse/how-to-learn/' },\r\n      { name: 'Адаптивный сайт', link: 'https://github.com/GreysMouse/russian-travel/' },\r\n      { name: 'Одностраничное приложение', link: 'https://github.com/GreysMouse/react-mesto-api-full/' }\r\n    ]\r\n  });\r\n  \r\n  const [ isLoggedIn, setIsLoggedIn ] = React.useState(true);\r\n\r\n  const [ isMenuOpen, setIsMenuOpen ] = React.useState(false);\r\n  const [ isInfoPopupOpen, setIsInfoPopupOpen ] = React.useState(false);\r\n  const [ isMoviesSearchInitiated,  setIsMoviesSearchInitiated ] = React.useState(false);\r\n   \r\n  const [ initialMoviesList, setInitialMoviesList ] = React.useState([]);\r\n  const [ foundMoviesList, setFoundMoviesList ] = React.useState([]);  \r\n  const [ displayedMoviesList, setDisplayedMoviesList ] = React.useState([]);\r\n  const [ savedMoviesList,  setSavedMoviesList ] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    viewportWidthListener.setListener(handleViewportWidth);\r\n\r\n    userApi.getUserCredentials()\r\n    .then((user) => handleAuthorization(user))\r\n    .catch((err) => console.log(errorHandler(err, 'Необходима авторизация')));\r\n\r\n    handleSavedMoviesUpload();\r\n\r\n    return () => {\r\n      viewportWidthListener.removeListener(handleViewportWidth);\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    setDisplayedMoviesList((displayedMoviesList) => {\r\n      return moviesCountHandler.getCards(foundMoviesList, displayedMoviesList, currentViewportWidth);\r\n    });\r\n  }, [ foundMoviesList, currentViewportWidth ]);\r\n\r\n  React.useEffect(() => {\r\n    if (isInfoPopupOpen) setTimeout(() => setIsInfoPopupOpen(false), INFO_POPUP_TIMEOUT);\r\n  }, [ isInfoPopupOpen ]);\r\n\r\n  function handleViewportWidth(evt) {\r\n    if (!isViewportWidthResizing) {\r\n      setIsViewportWidthResizing(true);\r\n\r\n      setTimeout(() => {\r\n        setCurrentViewportWidth(evt.target.innerWidth);\r\n        setIsViewportWidthResizing(false);\r\n      }, VIEWPORT_WIDTH_RESIZING_TIMEOUT);\r\n    }\r\n  }\r\n\r\n  function handleInfoPopupClick() {\r\n    setIsInfoPopupOpen(false);\r\n  }\r\n\r\n  function handleSavedMoviesUpload() {\r\n    moviesApi.getSavedMovies()\r\n    .then((movies) => setSavedMoviesList(movies))\r\n    .catch((err) => {\r\n      setIsLoggedIn(false);\r\n      console.log(errorHandler(err, 'Необходима авторизация'))\r\n    });\r\n  }\r\n\r\n  function showInfoMessage(message) {\r\n    setIsInfoPopupOpen(true);\r\n    setInfoMessage(message);\r\n    console.log(message);\r\n  }\r\n\r\n  function handleAuthorization({ email, name }) {\r\n    setCurrentUser((currentUser) => {\r\n      currentUser.name = name;\r\n      currentUser.email = email;\r\n\r\n      return currentUser;\r\n    });\r\n\r\n    handleSavedMoviesUpload();\r\n\r\n    setIsLoggedIn(true);\r\n    setInitialMoviesList(JSON.parse(localStorage.getItem('movies')) || []);\r\n  }\r\n\r\n  function handleLogin(user) {\r\n    setIsDataLoading(true);\r\n\r\n    authApi.login(user)\r\n    .then((user) => {\r\n      showInfoMessage(`Выполнен вход в аккаунт ${ user.email }`);\r\n\r\n      handleAuthorization(user);\r\n\r\n      localStorage.removeItem('movies');\r\n      history.push('/movies');\r\n    })\r\n    .catch((err) => showInfoMessage(errorHandler(err, \r\n      'Введён незарегистрированный логин или неправильный пароль'\r\n      )\r\n    ))\r\n    .finally(() => setIsDataLoading(false));\r\n  }\r\n\r\n  function handleLogout() {\r\n    authApi.logout()\r\n    .then(() => {\r\n      showInfoMessage(`Выполнен выход из аккаунта ${ currentUser.email }`);\r\n\r\n      setIsLoggedIn(false);\r\n      setIsMoviesSearchInitiated(false);\r\n\r\n      setInitialMoviesList([]);\r\n      setFoundMoviesList([]);\r\n      setDisplayedMoviesList([]);\r\n      setSavedMoviesList([]);\r\n      \r\n      localStorage.removeItem('movies');\r\n      history.push('/');\r\n    })\r\n    .catch((err) => showInfoMessage(errorHandler(err, 'Не удалось выполнить выход из аккаунта')));\r\n  }\r\n\r\n  function handleRegister(user) {\r\n    setIsDataLoading(true);\r\n    \r\n    authApi.register(user)\r\n    .then(() => {\r\n      showInfoMessage(`Регистрация пользователя ${ user.email } прошла успешно`);\r\n\r\n      handleLogin({\r\n        email: user.email,\r\n        password: user.password\r\n      });\r\n    })\r\n    .catch((err) => showInfoMessage(errorHandler(err, \r\n        'Введены некорректные данные или пользователь с таким E-mail уже существует'\r\n      ))\r\n    )\r\n    .finally(() => setIsDataLoading(false));\r\n  }\r\n\r\n  function handleUserCredentialsUpdate(credentials) {\r\n    setIsDataLoading(true);\r\n\r\n    userApi.updateUserCredentials(credentials)\r\n    .then((user) => {\r\n      showInfoMessage(`${\r\n        user.name !== currentUser.name ? 'Новое имя: ' + user.name + '\\n' : ''\r\n      }${\r\n        user.email !== currentUser.email ? 'Новый E-mail: ' + user.email : ''\r\n      }`);     \r\n\r\n      setCurrentUser((currentUser) => {\r\n        currentUser.name = user.name;\r\n        currentUser.email = user.email;\r\n\r\n        return currentUser;\r\n      });\r\n    })\r\n    .catch((err) => showInfoMessage(errorHandler(err, \r\n      'Введены некорректные данные или пользователь с таким E-mail уже существует'\r\n    )))\r\n    .finally(() => setIsDataLoading(false));\r\n  }\r\n\r\n  function handleMoviesSearch(searchQuery, isShort) {\r\n    setIsMoviesSearchInitiated(true);\r\n\r\n    if (!initialMoviesList.length) {    \r\n      setIsDataLoading(true);\r\n\r\n      moviesApi.searchMovies()\r\n      .then((moviesList) => {\r\n        const formattedMoviesList = moviesFilter.propertiesFilter(moviesList);\r\n        const filteredMoviesList = moviesFilter.searchFilter(formattedMoviesList, searchQuery, isShort);\r\n\r\n        setInitialMoviesList(formattedMoviesList);\r\n        localStorage.setItem('movies', JSON.stringify(formattedMoviesList));\r\n\r\n        setDisplayedMoviesList([]);\r\n        setFoundMoviesList(moviesFilter.searchFilter(filteredMoviesList, searchQuery, isShort));\r\n      })\r\n      .catch((err) => showInfoMessage(errorHandler(err,\r\n          'Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз'\r\n        ))\r\n      )\r\n      .finally(() => setIsDataLoading(false));\r\n    }\r\n    else {\r\n      const filteredMoviesList = moviesFilter.searchFilter(initialMoviesList, searchQuery, isShort)\r\n\r\n      setDisplayedMoviesList([]);\r\n      setFoundMoviesList(filteredMoviesList);\r\n\r\n      setIsMoviesSearchInitiated(true);\r\n    }    \r\n  }\r\n\r\n  function handleMovieSave(movie) {\r\n    moviesApi.saveMovie(movie)\r\n    .then((movie) => setSavedMoviesList([ movie, ...savedMoviesList ]))\r\n    .catch((err) => showInfoMessage(errorHandler(err,\r\n        'Произошла ошибка при добавлении в избранное карточки с фильмом'\r\n      ))\r\n    );\r\n  }\r\n\r\n  function handleMovieDelete(movieId) {\r\n    moviesApi.deleteMovie(movieId)\r\n    .then(() => setSavedMoviesList((savedMoviesList) => {\r\n        return savedMoviesList.filter((savedMovie) => savedMovie._id !== movieId);\r\n      })\r\n    )\r\n    .catch((err) => showInfoMessage(errorHandler(err,\r\n        'При удалении карточки с фильмом произошла ошибка. Не удалось удалить карточку'\r\n      ))\r\n    );\r\n  }\r\n\r\n  function handleMenuButtonClick(evt) {\r\n    if (evt.target.tagName === 'BUTTON' || evt.target.tagName === 'ASIDE') setIsMenuOpen(!isMenuOpen);\r\n  }\r\n\r\n  function handleMoviesUploaderClick() {\r\n    const uploadedMovieCards = moviesCountHandler.uploadCards(foundMoviesList, displayedMoviesList, currentViewportWidth);\r\n\r\n    setDisplayedMoviesList(displayedMoviesList.concat(uploadedMovieCards));\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={ currentUser }>\r\n      <IsLoggedInContext.Provider value={ isLoggedIn }>\r\n        <IsDataLoadingContext.Provider value={ isDataLoading }>\r\n          <div className=\"app\">\r\n            <div className=\"app__container\">\r\n              <Switch>\r\n                <Route exact path=\"/\">\r\n                  <Header location=\"main\" onMenuOpen={ handleMenuButtonClick } /> \r\n                  <Main />\r\n                  <Footer />\r\n                </Route>            \r\n                <Route path=\"/signup\">\r\n                  <Register onRegister={ handleRegister } />\r\n                </Route>\r\n                <Route path=\"/signin\">\r\n                  <Login onLogin={ handleLogin } />\r\n                </Route>\r\n                <ProtectedRoute path=\"/movies\" defaultPath=\"/\">\r\n                  <Header location=\"main\" onMenuOpen={ handleMenuButtonClick } />\r\n                  <Movies\r\n                    isSearchButtonClicked={ isMoviesSearchInitiated }  \r\n                    foundMoviesList={ foundMoviesList }\r\n                    displayedMoviesList={ displayedMoviesList }\r\n                    savedMoviesList={ savedMoviesList }\r\n                    onMoviesSearch={ handleMoviesSearch }\r\n                    onMovieSave={ handleMovieSave }\r\n                    onMovieDelete={ handleMovieDelete }\r\n                    onUploaderClick={ handleMoviesUploaderClick }            \r\n                  />\r\n                  <Footer />\r\n                </ProtectedRoute>\r\n                <ProtectedRoute path=\"/saved-movies\" defaultPath=\"/\">\r\n                  <Header location=\"main\" onMenuOpen={ handleMenuButtonClick } />\r\n                  <SavedMovies\r\n                    savedMoviesList={ savedMoviesList }\r\n                    onMovieDelete={ handleMovieDelete }\r\n                  />\r\n                  <Footer />\r\n                </ProtectedRoute>\r\n                <ProtectedRoute path=\"/profile\" defaultPath=\"/\">\r\n                  <Header location=\"main\" onMenuOpen={ handleMenuButtonClick } />\r\n                  <Profile\r\n                    onUserUpdate={ handleUserCredentialsUpdate }\r\n                    onLogout={ handleLogout }\r\n                    logoutLink=\"/signin\"\r\n                  />\r\n                </ProtectedRoute>\r\n                <Route path=\"*\">\r\n                  <NotFoundPage />\r\n                </Route>\r\n              </Switch>\r\n              <Menu isOpen={ isMenuOpen } onMenuOpen={ handleMenuButtonClick } />\r\n              <ErrorInfoPopup\r\n                isOpen={ isInfoPopupOpen }\r\n                message={ infoMessage }\r\n                onClick={ handleInfoPopupClick }\r\n              />\r\n            </div>\r\n          </div>\r\n        </IsDataLoadingContext.Provider>\r\n      </IsLoggedInContext.Provider>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nimport './index.css';\r\n\r\nimport App from './components/App/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}